---
- name: install node & npm
  hosts: centos
  become: yes
  tasks:
    - name: update yum repo & cache
      yum: update_cache=yes
    - name: installation node & npm
      yum:
        pkg:
          - nodejs
          - npm

- name: Deploy nodejs app
  hosts: centos
  tasks:
    - name: copy nodejs folder tp a server
      copy:
        src: /home/centos/simple-nodejs-master/nodejs-app-1.0.0.tgz
        dest: /home/centos/app-1.0.0.tgz
#    - name: create the package
#      file:
#        name: package
#        path: /home/centos
#        state: directory
    - name: unpack the nodejs tar file
      unarchive:
        src: /home/centos/app-1.0.0.tgz
        dest: /home/centos/package
        remote_src: yes
